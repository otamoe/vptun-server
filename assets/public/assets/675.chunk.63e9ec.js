/*! For license information please see 675.chunk.63e9ec.js.LICENSE.txt */
"use strict";(self.webpackChunkvptun_server_assets=self.webpackChunkvptun_server_assets||[]).push([[675],{938:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var l=a(9739),o=a.n(l),r=a(4419),d=a.n(r)()(o());d.push([e.id,"#section-route-save form{padding:1em 2em}","",{version:3,sources:["webpack://./src/views/routes/Save.vue"],names:[],mappings:"AAEE,yBACE,eAAA",sourcesContent:["\n#section-route-save{\n  form {\n    padding: 1em 2em;\n  }\n}\n\n\n\n"],sourceRoot:""}]);const u=d},9544:(e,t,a)=>{var l=a(3379),o=a.n(l),r=a(7795),d=a.n(r),u=a(569),n=a.n(u),s=a(3565),i=a.n(s),m=a(9216),c=a.n(m),p=a(4589),f=a.n(p),w=a(938),k={};k.styleTagTransform=f(),k.setAttributes=i(),k.insert=n().bind(null,"head"),k.domAPI=d(),k.insertStyleElement=c();var b=o()(w.default,k);if(!w.default.locals||e.hot.invalidate){var v=!w.default.locals,A=v?w:w.default.locals;e.hot.accept(938,(t=>{w=a(938),function(e,t,a){if(!e&&t||e&&!t)return!1;var l;for(l in e)if((!a||"default"!==l)&&e[l]!==t[l])return!1;for(l in t)if(!(a&&"default"===l||e[l]))return!1;return!0}(A,v?w:w.default.locals,v)?(A=v?w:w.default.locals,b(w.default)):e.hot.invalidate()}))}e.hot.dispose((function(){b()}));w.default&&w.default.locals&&w.default.locals},9730:(e,t,a)=>{a.d(t,{Z:()=>r});var l=a(3613);const o={name:"FormOption"};const r=(0,a(4485).Z)(o,[["render",function(e,t,a,o,r,d){return(0,l.wg)(),(0,l.iD)("option",null,[(0,l.WI)(e.$slots,"default")])}]])},8675:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var l=a(3613),o=a(6739),r=a(1961);const d={id:"section-route-save",class:"route-section"};var u=a(3097),n=a(9594),s=a(7724),i=a(7329),m=a(7787),c=a(1384),p=a(8319),f=a(9730),w=a(762);const k={name:"RouteSave",components:{FormInput:m.Z,FormGroup:p.Z,FormLabel:c.Z,FormButton:w.Z,FormOption:f.Z,AlertMessage:i.Z},setup(){const e=(0,n.tv)(),t=(0,n.yj)();let a=(0,l.f3)("dayjs");const o=(0,l.f3)("axios");let r=(0,u.qj)({id:"",type:"NONE",sourceIP:"",sourcePort:0,destinationIP:"",destinationPort:0,remark:"",action:"ACCEPT",state:"AVAILABLE",level:0,createdAt:"",updatedAt:"",expiredAt:a(Date.UTC(9e3,0,1)).format("YYYY-MM-DDTHH:mm:ss"),loading:!1,submitting:!1,alert:{value:void 0,close:!0,type:"error"}});function d(e){if(e){switch(r.id=e.id,e.type||0){case 1:r.type="ICMP";break;case 100:r.type="UDP";break;case 101:r.type="TCP";break;default:r.type="NONE"}r.sourceIP=e.sourceIP||"",r.sourcePort=e.sourcePort||0,r.destinationIP=e.destinationIP||"",r.destinationPort=e.destinationPort||0,r.remark=e.remark||"",e.action?r.action="ACCEPT":r.action="REJECT",e.state?r.state="UNAVAILABLE":r.state="AVAILABLE",r.level=e.level||0,console.log(e.expiredAt),r.createdAt=a(1e3*e.createdAt).format("YYYY-MM-DDTHH:mm:ss"),r.updatedAt=a(1e3*e.updatedAt).format("YYYY-MM-DDTHH:mm:ss"),r.expiredAt=a(1e3*e.expiredAt).format("YYYY-MM-DDTHH:mm:ss")}else r.id="",r.type="NONE",r.sourceIP="",r.sourcePort=0,r.destinationIP="",r.destinationPort=0,r.remark="",r.action="ACCEPT",r.state="AVAILABLE",r.level=0,r.createdAt="",r.updatedAt="",r.expiredAt=a(Date.UTC(9e3,0,1)).format("YYYY-MM-DDTHH:mm:ss"),r.loading=!1,r.submitting=!1,r.alert={value:void 0,close:!0,type:"error"}}async function i(){if(("route/update"===t.name||"route/create"===t.name)&&t.params.route!==r.id)if(t.params.route){r.loading=!0,r.alert.value=void 0;try{let e=await o.get(s.T5+"/api/route/"+t.params.route);if(e.data.error)throw new Error(e.error);d(e.data.data)}catch(e){r.alert={value:e?.response?.data?.error||e,type:"error",close:!1}}finally{r.loading=!1}}else d(null)}return(0,l.bv)(i),(0,l.YP)((()=>t.params),i),{state:r,route:t,onLoad:i,onSubmit:async function(){r.submitting=!0;try{let l=0;if(""!==r.expiredAt){l=a(r.expiredAt).unix()}else l=Date.UTC(9e3,0,1)/1e3;let u=await o.post(s.T5+"/api/route"+(t.params.route?"/"+t.params.route:""),{type:r.type,sourceIP:r.sourceIP,sourcePort:r.sourcePort,destinationIP:r.destinationIP,destinationPort:r.destinationPort,remark:r.remark,action:r.action,state:r.state,level:r.level,expiredAt:l});if(u.data.error)throw new Error(u.error);let n=u.data.data;d(n),e.push({name:"route/update",params:{route:n.id}}),r.alert={value:t.params.route?"Updated":"Created",type:"success",close:!1}}catch(e){r.alert={value:e?.response?.data?.error||e,type:"error",close:!1}}finally{r.submitting=!1}}}}};a(9544);const b=(0,a(4485).Z)(k,[["render",function(e,t,a,u,n,s){const i=(0,l.up)("FormLabel"),m=(0,l.up)("FormInput"),c=(0,l.up)("FormGroup"),p=(0,l.up)("FormOption"),f=(0,l.up)("AlertMessage"),w=(0,l.up)("FormButton");return(0,l.wg)(),(0,l.iD)("section",d,[(0,l._)("h1",null,(0,o.zw)(e.$t(u.route.params.route?"Route Update":"Route Create")),1),(0,l._)("form",{action:"post",onSubmit:t[14]||(t[14]=(0,r.iM)(((...e)=>u.onSubmit&&u.onSubmit(...e)),["prevent"]))},[u.state.id?((0,l.wg)(),(0,l.j4)(c,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{for:"id",block:!0},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("ID")),1)])),_:1}),(0,l.Wm)(m,{id:"id",name:"id",block:!0,type:"text",disabled:!0,modelValue:u.state.id,"onUpdate:modelValue":t[0]||(t[0]=e=>u.state.id=e)},null,8,["modelValue"])])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{for:"remark",block:!0},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("Remark")),1)])),_:1}),(0,l.Wm)(m,{id:"remark",name:"remark",block:!0,type:"text",modelValue:u.state.remark,"onUpdate:modelValue":t[1]||(t[1]=e=>u.state.remark=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{for:"source-ip",block:!0},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("Source IP")),1)])),_:1}),(0,l.Wm)(m,{id:"source-ip",name:"source-ip",block:!0,type:"text",modelValue:u.state.sourceIP,"onUpdate:modelValue":t[2]||(t[2]=e=>u.state.sourceIP=e),placeholder:e.$t("Netmask: 10.0.0.0/16")},null,8,["modelValue","placeholder"])])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{for:"source-port",block:!0},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("Source port")),1)])),_:1}),(0,l.Wm)(m,{id:"source-port",name:"source-port",block:!0,type:"number",modelValue:u.state.sourcePort,"onUpdate:modelValue":t[3]||(t[3]=e=>u.state.sourcePort=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{for:"destination-ip",block:!0},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("Destination IP")),1)])),_:1}),(0,l.Wm)(m,{id:"destination-ip",name:"destination-ip",block:!0,type:"text",modelValue:u.state.destinationIP,"onUpdate:modelValue":t[4]||(t[4]=e=>u.state.destinationIP=e),placeholder:e.$t("Netmask: 10.0.0.0/16")},null,8,["modelValue","placeholder"])])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{for:"destination-port",block:!0},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("Destination port")),1)])),_:1}),(0,l.Wm)(m,{id:"destination-port",name:"destination-port",block:!0,type:"number",modelValue:u.state.destinationPort,"onUpdate:modelValue":t[5]||(t[5]=e=>u.state.destinationPort=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{for:"type",block:!0},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("Type")),1)])),_:1}),(0,l.Wm)(m,{id:"type",name:"type",block:!0,type:"select",modelValue:u.state.type,"onUpdate:modelValue":t[6]||(t[6]=e=>u.state.type=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{value:"NONE"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("NONE")),1)])),_:1}),(0,l.Wm)(p,{value:"ICMP"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("ICMP")),1)])),_:1}),(0,l.Wm)(p,{value:"UDP"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("UDP")),1)])),_:1}),(0,l.Wm)(p,{value:"TCP"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("TCP")),1)])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{for:"action",block:!0},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("Action")),1)])),_:1}),(0,l.Wm)(m,{id:"action",name:"action",block:!0,type:"select",modelValue:u.state.action,"onUpdate:modelValue":t[7]||(t[7]=e=>u.state.action=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{value:"REJECT"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("Reject")),1)])),_:1}),(0,l.Wm)(p,{value:"ACCEPT"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("Accept")),1)])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{for:"state",block:!0},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("State")),1)])),_:1}),(0,l.Wm)(m,{id:"state",name:"state",block:!0,type:"select",modelValue:u.state.state,"onUpdate:modelValue":t[8]||(t[8]=e=>u.state.state=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{value:"AVAILABLE"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("Available")),1)])),_:1}),(0,l.Wm)(p,{value:"UNAVAILABLE"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("Unavailable")),1)])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{for:"level",block:!0},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("Level")),1)])),_:1}),(0,l.Wm)(m,{id:"level",name:"level",block:!0,type:"number",modelValue:u.state.level,"onUpdate:modelValue":t[9]||(t[9]=e=>u.state.level=e)},null,8,["modelValue"])])),_:1}),u.state.id?((0,l.wg)(),(0,l.j4)(c,{key:1},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{for:"created-at",block:!0},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("Created at")),1)])),_:1}),(0,l.Wm)(m,{id:"created-at",name:"created_at",block:!0,type:"datetime-local",disabled:!0,modelValue:u.state.createdAt,"onUpdate:modelValue":t[10]||(t[10]=e=>u.state.createdAt=e)},null,8,["modelValue"])])),_:1})):(0,l.kq)("",!0),u.state.id?((0,l.wg)(),(0,l.j4)(c,{key:2},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{for:"updated-at",block:!0},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("Updated at")),1)])),_:1}),(0,l.Wm)(m,{id:"updated-at",name:"updated_at",block:!0,type:"datetime-local",disabled:!0,modelValue:u.state.updatedAt,"onUpdate:modelValue":t[11]||(t[11]=e=>u.state.updatedAt=e)},null,8,["modelValue"])])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{for:"expired-at",block:!0},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("Expired at")),1)])),_:1}),(0,l.Wm)(m,{id:"expired-at",name:"expired-at",block:!0,type:"datetime-local",modelValue:u.state.expiredAt,"onUpdate:modelValue":t[12]||(t[12]=e=>u.state.expiredAt=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{value:u.state.alert.value,type:u.state.alert.type,close:u.state.alert.close,onClose:t[13]||(t[13]=e=>u.state.alert.close=!0)},null,8,["value","type","close"])])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,{block:!0,styleSize:"lg",type:"submit",disabled:u.state.loading,submitting:u.state.submitting},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("Submit")),1)])),_:1},8,["disabled","submitting"])])),_:1})],32)])}]])}}]);
//# sourceMappingURL=675.chunk.63e9ec.js.map